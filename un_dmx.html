<!DOCTYPE html>

<html lang="en">

<head>
    <!-- icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <title>FGMM-Simulador</title>
    <meta charset="utf-8" />


    <script type="text/javascript" src="css/dummy.js"></script>
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="css/result-light.css">
    <link rel="stylesheet" type="text/css" href="css/codemirror.css">
    <link rel="stylesheet" type="text/css" href="css/lint.css">
    <link rel="stylesheet" href="css/dracula.css">
    <link rel="stylesheet" href="css/complemento.css">
    <link rel="stylesheet" href="addon/scroll/simplescrollbars.css">





    <script type="text/javascript" src="js/codemirror.js"></script>
    <script type="text/javascript" src="js/javascript.js"></script>
    <script type="text/javascript" src="js/css.js"></script>
    <script type="text/javascript" src="js/htmlmixed.js"></script>
    <script type="text/javascript" src="js/xml.js"></script>
    <script type="text/javascript" src="js/lint.js"></script>
    <script type="text/javascript" src="js/javascript-lint.js"></script>
    <script type="text/javascript" src="js/json-lint.js"></script>
    <script type="text/javascript" src="js/css-lint.js"></script>
    <script type="text/javascript" src="js/html-lint.js"></script>
    <script type="text/javascript" src="js/jshint.js"></script>
    <script type="text/javascript" src="js/jsonlint.js"></script>
    <script type="text/javascript" src="https://csslint.net/js/csslint.js"></script>
    <script type="text/javascript" src="js/closetag.js"></script>
    <script type="text/javascript" src="js/matchbrackets.js"></script>
    <script type="text/javascript" src="js/active-line.js"></script>
    <script type="text/javascript" src="js/foldcode.js"></script>
    <script type="text/javascript" src="js/foldgutter.js"></script>
    <script type="text/javascript" src="js/brace-fold.js"></script>
    <script type="text/javascript" src="js/xml-fold.js"></script>
    <script type="text/javascript" src="js/comment-fold.js"></script>
    <!-- js scrollbar-->
    <script type="text/javascript" src="addon/scroll/simplescrollbars.js"></script>
    <script type="text/javascript" src="addon/wrap/hardwrap.js"></script>

    <style id="compiled-css" type="text/css"></style>

    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">

    <script src="libs/vendor/jquery-2.1.4.min.js"></script>
    <!--script defer src="controllers/ArmRobotController.js"></script-->
    <!--script defer src="virtualizers/ArmRobotVirtualizer.js"></script-->
    <!--script defer src="dist/msw.js"></script-->
    <!--script defer src="dist/server.js"></script-->
    <script defer src="libs/vendor/three.min.js"></script>
    <script src="libs/vendor/threex.volumetricspotlightmaterial.js"></script>
    <script defer src="libs/vendor/stats.min.js"></script>
    <script defer src="libs/vendor/physi.js"></script>
    <script defer src="libs/vendor/dat.gui.js"></script>
    <script defer src="libs/vendor/chroma.js"></script>

    <script defer src="libs/vendor/ThreeBSP.js"></script>
    <script defer src="libs/vendor/STLLoader.js"></script>
    <script defer src="libs/vendor/orbit.js"></script>
    <script defer src="fgmm_config/default1.js"></script>
    <script defer src="fgmm_config/gui.js"></script>
    <!--script src="representations/ArmRobotRepresentation.js"></script-->
    <script defer src="libs/robothree/robothree.js"></script>

    <!--<script defer src="robots/ThreeWheelDistanceSensingRobot.js"></script>-->

</head>

<body style="background-color: rgb(2,51,175); margin:0;">

    <div class="container-fluid d-flex justify-content-start flex-nowrap" style="margin-top:25px; gap:0px; width:100%;">
        <!-- EDITOR DE CODIGO-->
        <div class="card align-self-stretch w-50"
            style="background-color:rgb(40,42,54);box-shadow:inset; border-radius:15px; margin-left:0px;">

            <div class="card-header d-flex flex-row-reverse ">
                <button id="run-code" type="button" class="btn btn-success" style="margin-left:auto;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                        fill="#FFFFFF">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z" />
                    </svg>
                </button>
                <button type="button" class="btn btn-success me-auto" id="dwn-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                        viewBox="0 0 24 24" width="24px" fill="#FFFFFF">
                        <g>
                            <rect fill="none" height="24" width="24" />
                        </g>
                        <g>
                            <path d="M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z" />
                        </g>
                    </svg>
                </button>
            </div>

            <div class="card-body ">
                <textarea class="input-group overflow-auto" style="margin: auto;" id="code-js"
                    name="code-js">var dmx = window.simulator.getRobotById("dmx1");
dmx.moverPitch(90);
                </textarea>
            </div>
        </div>


        <!-- SIMULADOR -->
        <div class="card d-flex p-2 align-self-center w-50" style="border-radius:15px; margin-left:15px; height:95vh;">
            <div hidden id="gui-container" style="z-index: 100; position: absolute;"></div>
                <canvas id="robothree" style="border-radius:15px; width: 100%; height: 100%; z-index: 1; "></canvas>
        </div>

        <script type="text/javascript">
            $(document).ready(() => {

                $('#run-code').click(() => {
                    var text2 = editor.getValue();
                    eval(text2);
                });

            });

            var editor = CodeMirror.fromTextArea(document.getElementById("code-js"), {
                mode: "javascript",
                theme: "dracula",
                scrollbarStyle: "simple",
                lineNumbers: true,
                gutters: ["CodeMirror-lint-markers"],
                lint: true
            });

            //descarga del archivo
            function download(filename, text) {
                var element = document.createElement('a');
                element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
                element.setAttribute('download', filename);
                element.style.display = 'none';
                document.body.appendChild(element);
                element.click();
                document.body.removeChild(element);
            }
            document.getElementById("dwn-btn").addEventListener("click", function () {
                var text = editor.getValue();
                var fecha = new Date();
                var filename = "Codigo " + fecha.getFullYear() + "-" + fecha.getMonth() + "-" + fecha.getUTCDate() + " at " + fecha.getHours() + "." + fecha.getMinutes() + "." + fecha.getSeconds() + ".txt"

                download(filename, text);
            }, false);
            //size window
            editor.setSize("100%", "600px");

        </script>



</body>

</html>